# 景院服务助手

::: tip
功能：
全自动打印系统、在线免签支付对接、内网穿透实现反向代理
:::

## 打印服务接口设计

::: tip
模块名称：print
:::

### PDF文件上传接口

> 维护人员：平昔
> 创建时间：2019-09-27

#### 接口简介

用户通过终端上传文件至服务器指定文件夹，以便实现打印操作。

#### 请求地址

/print/PrintPdf

#### 请求类型

POST

#### 请求参数

|参数名|类型|必填|描述|默认值|参考值|
| ------------- |:-------------:|:-------------:| ------------- |:-------------:|:-------------:|
| file | File | 是 | 需要上传的文件 | - | - |

#### 返回正确JSON示例

```json
{
 "success": true,
 "res_code": "0",
 "page":16,
 "file_name":"文件上传接口.pdf",
 "file_type":"pdf",
 "file_size":"168kb",
 "file_id":155811511
}
```

#### 返回错误JSON示例

```json
{
 "success": false
}
```

#### 备注说明

无
#### 修改日志

2019.9.27 增加返回字段file_name,file_type等

---

### 订单信息提交接口

> 维护人员：平昔
> 创建时间：2019-09-27

#### 接口简介

用户通过确认上传的文件信息后，继续完善订单内容，并提交。

#### 请求地址

/print/message

#### 请求类型

POST

#### 请求参数

|参数名|类型|必填|描述|默认值|参考值|
| ------------- |:-------------:|:-------------:| ------------- |:-------------:|:-------------:|
| file_id | number | 是 | 目标文件唯一ID号 | - | 155811511 |
| username | varchar | 是 | 用户标识名称 | - | 快点科技 |
| phone | number | 是 | 用户联系手机号 | - | 18879013921 |
| wechat | varchar | 是 | 用户联系微信号 | - | px202020 |
| send_server | number | 是 | 是否需要配送 1需要 0不需要 | - | 1 |
| rest_id | varchar | 是 | 收货地址 | - | 西2A303 |
| print_type | number | 是 | 打印模式设置 1双面 0单面 | - | 1 |
| print_color | number | 是 | 打印颜色设置 1彩色 0黑白 | - | 1 |
| print_num | number | 是 | 打印数量 | - | 10 |

#### 返回正确JSON示例

```json
{
 "success": true,
 "res_code": "0",
 "url":"http://localhost:8080/learn/zh/guide/",
 "file_name":"文件上传接口.pdf",
 "phone":18879013921,
 "wechat":"px202020",
 "send_server":1,
 "rest_id":"西2A303",
 "username":"快点科技",
 "pages":10,
 "price":0.9,
 "print_type":1,
 "print_color":1,
 "print_num":10
}
```

#### 返回错误JSON示例

```json
{
 "success": false
}
```

#### 备注说明

无

#### 修改日志

---

### 打印执行接口

> 维护人员：平昔
> 创建时间：2019-09-27

#### 接口简介

服务端间确认支付结果，安排打印任务，返回结果给用户。

#### 请求地址

/print/done

#### 请求类型

POST

#### 请求参数

|参数名|类型|必填|描述|默认值|参考值|
| ------------- |:-------------:|:-------------:| ------------- |:-------------:|:-------------:|
| file_id | number | 是 | 目标文件唯一ID号 | - | 155811511 |

#### 返回正确JSON示例

```json
{
 "success": true,
 "res_code": "0"
}
```

#### 返回错误JSON示例

```json
{
 "success": false
}
```

#### 备注说明

无

#### 修改日志

---

## 支付接口设计

::: tip
模块名称：print
:::

### 支付金额接口

> 维护人员：平昔
>
> 创建时间：2019-09-20

#### 接口简介

用户通过通过扫码支付相应的金额从而返回支付结果

#### 请求地址

/print/pay

#### 请求类型

GET

#### 请求参数

|参数名	|类型	|必填	|描述	|默认值	|参考值|
| ------------- |:-------------:|:-------------:| ------------- |:-------------:|:-------------:|
| paytype | number | 是 | 支付类型1微信2支付宝 | 1 | 2 |
| price | number | 是 | 需要支付的金额 | 0.09 | 0.09 |
| param | varchar | 是 | 用户名称 | - | 快点科技 |


#### 返回正确JSON示例

```json
{
  "url": "http://bbs.e-spy.cn/example/main.php?payId=1568959958246&type=1&param=kuaidian&price=0.01&sign=17fe175fd9c41ef61a74bc8915b6429b&isHtml=1"
}
```
#### 返回错误JSON示例

```json
{
	"success": false
}
```

#### 备注说明

无
#### 修改日志

无



---









### 支付成功接口

> 维护人员：平昔
>
> 创建时间：2019-09-20

#### 接口简介

用户通过通过扫码支付相应的金额成功后返回支付结果

#### 请求地址

/print/paydone

#### 请求类型

GET

#### 请求参数

|参数名	|类型	|必填	|描述	|默认值	|参考值|
| ------------- |:-------------:|:-------------:| ------------- |:-------------:|:-------------:|
| payid | number | 是 | 支付订单号 | - | 1568962679243 |
| type | number | 是 | 支付类型1微信2支付宝 | 1 | 2 |
| price | number | 是 | 需要支付的金额 | 0.09 | 0.09 |
| reallyPrice | number | 是 | 实际支付的金额 | 0.09 | 0.09 |
| param | varchar | 是 | 用户名称 | - | 快点科技 |


#### 返回正确JSON示例

```json
{
  "url": "http://bbs.e-spy.cn/example/main.php?payId=1568959958246&type=1&param=kuaidian&price=0.01&sign=17fe175fd9c41ef61a74bc8915b6429b&isHtml=1"
}
```
#### 返回错误JSON示例

```json
{
	"success": false
}
```

#### 备注说明

无
#### 修改日志

无



---